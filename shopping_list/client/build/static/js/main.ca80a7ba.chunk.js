(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{116:function(e,t,n){},117:function(e,t,n){"use strict";n.r(t);var c=n(2),r=n.n(c),a=n(26),s=n.n(a),i=n(133),o=n(129),u=n(130),j=n(31),l=n(21),d=n(22),h=n(24),b=n(23),p=n(4),m=function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return Object(p.jsx)("div",{children:Object(p.jsxs)("div",{className:"page-title",children:[Object(p.jsx)("h4",{className:"title-text",children:this.props.title}),Object(p.jsx)("div",{className:"right",children:this.props.children})]})})}}]),n}(c.Component),O=n(121),f=n(118),x=n(131),g=n(135),v=n(136),k=n(137),y=n(132),I=n(17),C=n(11),N=n.n(C),w=n(16),F=n(13),S=n(18),E=n.n(S),G="/api/alerts/",T=function(){var e=Object(w.a)(N.a.mark((function e(t,n){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post(G,{text:t,color:n});case 2:if(200!==e.sent.status){e.next=8;break}return e.next=6,Promise.resolve();case 6:e.next=10;break;case 8:return e.next=10,Promise.reject();case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),P=function(){var e=Object(w.a)(N.a.mark((function e(t,n){var c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c="Successfully ".concat(t," ").concat(n,"."),e.next=3,T(c,"success");case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),R=function(){var e=Object(w.a)(N.a.mark((function e(t){var n,c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.put("/api/items/edit/".concat(t.id),t);case 3:return n=e.sent,c=n.data,e.next=7,P("updated",'item "'.concat(c.name,'"'));case 7:e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(0),e.next=13,T("Error in editItem api call: ".concat(e.t0.message),"danger");case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(w.a)(N.a.mark((function e(t,n){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.put("/api/items/toggle/".concat(t),{checked:n});case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.next=9,T("Error in toggleItemCheck api call: ".concat(e.t0.message),"danger");case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,n){return e.apply(this,arguments)}}(),D=Object(F.c)({groups:[],setGroups:Object(F.b)((function(e,t){e.groups=t})),fetchGroups:Object(F.e)(function(){var e=Object(w.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.get("/api/groups/");case 2:n=e.sent,t.setGroups(n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),addGroup:Object(F.b)((function(e,t){e.groups.push(t)})),saveGroup:Object(F.e)(function(){var e=Object(w.a)(N.a.mark((function e(t,n){var c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post("/api/groups/",n);case 2:c=e.sent,t.addGroup(c.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),items:null,setItems:Object(F.b)((function(e,t){e.items=t})),fetchItems:Object(F.e)(function(){var e=Object(w.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.get("/api/items/");case 2:n=e.sent,t.setItems(n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),editItem:Object(F.b)((function(e,t){var n=Object(I.a)(Object(I.a)({},t),{},{groups:t.groups.map((function(e){return e.groupId}))});e.items=e.items.map((function(e){return e.id===n.id?t:e}));var c=Date.now();R(n).then((function(){console.log("Item edited. Response time: ".concat(K(c),"s"))}))})),toggleItemCheck:Object(F.b)((function(e,t){var n=Date.now();e.items=e.items.map((function(e){return e.id===t.itemId?(e.checked=t.checked,e):e})),B(t.itemId,t.checked).then((function(){console.log("Item ".concat(t.checked?"":"un","checked. Response time: ").concat(K(n),"s"))}))})),focusItem:null,setFocusItem:Object(F.b)((function(e,t){e.focusItem=t})),alerts:[]}),K=function(e){return(Date.now()-e)/1e3},z=Object(F.d)(),A=z.useStoreActions,J=(z.useStoreDispatch,z.useStoreState),_=n(54),L=function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return Object(p.jsxs)(f.a,{className:"d-flex",children:[Object(p.jsxs)("div",{className:"d-block mt-auto",children:[this.props.name,""===this.props.notes?"":Object(p.jsx)("small",{className:"d-block text-muted",children:this.props.notes})]}),Object(p.jsx)("div",{className:"my-auto ml-auto",children:Object(p.jsx)(_.a,{size:"sm",color:"info",children:"Complete"})})]})}}]),n}(c.Component),q=n(119),H=n(55),M=function(e){var t=e.item;return Object(p.jsxs)("label",{htmlFor:"checkbox_".concat(t.id),className:"custom-control-label",children:[t.name,t.recurring?Object(p.jsx)(H.a,{className:"ml-1",style:{paddingBottom:"3px"}}):"",""===t.notes?"":Object(p.jsx)("small",{className:"text-muted d-block",children:t.notes})]})},Q=n(56),U=function(e){var t=e.item,n=A((function(e){return e.setFocusItem})),r=A((function(e){return e.toggleItemCheck}));return Object(p.jsx)(c.Fragment,{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:Object(p.jsxs)("div",{className:"custom-control custom-checkbox",children:[Object(p.jsx)(q.a,{id:"checkbox_".concat(t.id),type:"checkbox",className:"custom-control-input",checked:t.checked,onChange:function(e){return r({itemId:t.id,checked:e.target.checked})}}),Object(p.jsx)(M,{item:t})]})}),Object(p.jsx)("td",{children:Object(p.jsx)(Q.a,{style:{cursor:"pointer"},onClick:function(){return n(t)}})})]})})},V=n(120),W=(n(87),n(57)),X=n.n(W),Y=function(e){var t=e.className;return Object(p.jsx)("div",{className:t,children:Object(p.jsx)(X.a,{type:"Bars",height:30,color:"#fff"})})},Z=function(e){var t=e.group,n=J((function(e){var n;return null===(n=e.items)||void 0===n?void 0:n.filter((function(e){return e.groups.some((function(e){return e.groupId===t.id}))}))}));return Object(p.jsx)(c.Fragment,{children:void 0!==n?Object(p.jsx)(V.a,{className:"mb-0 same-width",striped:!0,children:Object(p.jsx)("tbody",{children:n.map((function(e){return Object(p.jsx)(U,{item:e},e.id)}))})}):Object(p.jsx)(Y,{className:"my-3"})})},$=function(e){var t=e.group;return Object(p.jsx)(c.Fragment,{children:Object(p.jsxs)(O.a,{className:"space-between",children:[Object(p.jsx)(L,{name:t.name,notes:t.notes}),Object(p.jsx)(Z,{group:t})]})})},ee=function(){var e=J((function(e){return e.groups})),t=A((function(e){return e.fetchGroups})),n=A((function(e){return e.fetchItems}));return Object(c.useEffect)((function(){t(),n()}),[t,n]),Object(p.jsx)(c.Fragment,{children:e.map((function(e){return Object(p.jsx)($,{group:e},e.id)}))})},te=r.a.memo(ee),ne=n(125),ce=n(134),re=n(126),ae=n(127),se=n(128),ie=n(123),oe=n(122),ue=function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return Object(p.jsxs)(c.Fragment,{children:[Object(p.jsx)(oe.a,{htmlFor:this.props.id,children:this.props.label}),Object(p.jsx)(q.a,{id:this.props.id,type:this.props.type,value:this.props.value,onChange:this.props.onChange,onKeyPress:this.props.onKeyPress})]})}}]),n}(c.Component),je=function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return Object(p.jsx)(ie.a,{check:!0,children:Object(p.jsxs)(oe.a,{check:!0,children:[Object(p.jsx)(q.a,{checked:this.props.checked,onChange:this.props.handleChange,type:"checkbox"}),this.props.label]})})}}]),n}(c.Component),le=function(e){Object(c.useEffect)((function(){var e;null===(e=document.getElementById("name-input"))||void 0===e||e.focus()}));var t=J((function(e){return e.groups}));return Object(p.jsxs)(c.Fragment,{children:[Object(p.jsx)(ie.a,{children:Object(p.jsx)(ue,{label:"Name",id:"name-input",type:"text",value:e.editedItem.name,onChange:e.handleNameTextChange,onKeyPress:function(t){"Enter"===t.key&&e.handleFormSubmit()}})}),Object(p.jsx)(ie.a,{children:Object(p.jsx)(ue,{label:"Notes",id:"notes-input",type:"textarea",value:e.editedItem.notes,onChange:e.handleNotesTextChange})}),Object(p.jsxs)(ie.a,{children:[Object(p.jsx)(oe.a,{className:"mb-0",children:"Recurring"}),Object(p.jsx)(je,{checked:e.editedItem.recurring,handleChange:e.handleRecurringCheckChange,label:"Item repeats"})]}),Object(p.jsxs)(ie.a,{children:[Object(p.jsx)(oe.a,{className:"mb-0",children:"Groups"}),t.map((function(t){return Object(p.jsx)(je,{checked:e.editedItem.groups.some((function(e){return e.groupId===t.id})),handleChange:function(n){return e.handleGroupCheckChange(n,t.id)},label:t.name},t.id)}))]})]})},de=n(124),he=function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).state={visible:!0},c}return Object(d.a)(n,[{key:"render",value:function(){var e=this;return Object(p.jsx)(de.a,{className:"mt-3",color:this.props.color,isOpen:this.state.visible,toggle:function(){return e.setState({visible:!1})},children:this.props.text})}}]),n}(c.Component),be=function(){var e=J((function(e){return e.focusItem})),t=A((function(e){return e.setFocusItem})),n=A((function(e){return e.editItem})),r=J((function(e){return e.groups})),a=Object(c.useState)(!0),s=Object(j.a)(a,2),i=s[0],o=s[1],u=Object(c.useState)(""),l=Object(j.a)(u,2),d=l[0],h=l[1],b=function(){t(null),o(!0)},m=Object(c.useState)(e),O=Object(j.a)(m,2),f=O[0],x=O[1];function g(){i&&(n(f),b())}return Object(c.useEffect)((function(){x(e)}),[e]),Object(p.jsx)(ne.a,{children:e&&Object(p.jsx)(c.Fragment,{children:Object(p.jsxs)(ce.a,{centered:!0,toggle:b,isOpen:!0,children:[Object(p.jsx)(re.a,{toggle:b,className:"d-flex",children:e.name}),Object(p.jsxs)(ae.a,{children:[!i&&Object(p.jsx)(he,{color:"danger",text:d}),Object(p.jsx)(le,{editedItem:f,handleNameTextChange:function(e){return x(Object(I.a)(Object(I.a)({},f),{},{name:e.target.value}))},handleNotesTextChange:function(e){return x(Object(I.a)(Object(I.a)({},f),{},{notes:e.target.value}))},handleRecurringCheckChange:function(e){return x(Object(I.a)(Object(I.a)({},f),{},{recurring:e.target.checked}))},handleGroupCheckChange:function(e,t){var n=[];r.forEach((function(c){c.id===t?e.target.checked&&n.push({groupId:c.id,groupName:c.name}):f.groups.some((function(e){return e.groupId===c.id}))&&n.push({groupId:c.id,groupName:c.name})})),x(Object(I.a)(Object(I.a)({},f),{},{groups:n})),n.length<1?(o(!1),h("Each item must be in at least one group.")):o(!0)},handleFormSubmit:g})]}),Object(p.jsxs)(se.a,{children:[Object(p.jsx)(_.a,{onClick:b,color:"secondary",children:"Cancel"}),Object(p.jsx)(_.a,{disabled:!i,onClick:g,type:"submit",color:"info",children:"Submit"})]})]})})})},pe=function(){return Object(p.jsxs)(c.Fragment,{children:[Object(p.jsxs)("div",{children:[Object(p.jsx)(m,{title:"Shopping List",children:me()}),Object(p.jsxs)(o.a,{children:[Object(p.jsx)(u.a,{sm:12,lg:8,children:Object(p.jsx)(te,{})}),Object(p.jsx)(u.a,{children:Object(p.jsxs)(O.a,{className:"space-between mt-3 mt-lg-0",children:[Object(p.jsx)(f.a,{children:"New Item"}),Object(p.jsx)(x.a,{children:"Form"})]})})]})]}),Object(p.jsx)(be,{})]})},me=function(){var e=Object(c.useState)(!1),t=Object(j.a)(e,2),n=t[0],r=t[1];return Object(p.jsxs)(g.a,{isOpen:n,toggle:function(){r(!n)},size:"sm",color:"info",children:[Object(p.jsx)(v.a,{caret:!0,children:"Actions"}),Object(p.jsxs)(k.a,{right:!0,children:[Object(p.jsx)(y.a,{children:"Test"}),Object(p.jsx)(y.a,{children:"Test"})]})]})},Oe=function(){return Object(p.jsx)(F.a,{store:D,children:Object(p.jsxs)(i.a,{className:"main-container pt-0",children:[Object(p.jsx)(o.a,{children:Object(p.jsx)(u.a,{})}),Object(p.jsx)(o.a,{children:Object(p.jsx)(u.a,{children:Object(p.jsx)(pe,{})})})]})})};n(116);s.a.render(Object(p.jsx)(r.a.Fragment,{children:Object(p.jsx)(Oe,{})}),document.getElementById("root"))}},[[117,1,2]]]);
//# sourceMappingURL=main.ca80a7ba.chunk.js.map